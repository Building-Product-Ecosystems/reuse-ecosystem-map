(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,n,t){},110:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t.n(r),a=t(6),i=(t(33),t(34)),s=t.n(i),l=t(4),d="Latitude",c="Longitude",u="Primary Role",p="Colors (HEX) (from Primary Role copy)",m={name:"data",fields:[d,c,"Entity Name","Region",u,"Secondary Role (if applicable)","Full Address","Contact Name","Email","Phone Number","Website","Collaboration Opportunities",p],view:"View for map"},f={name:"Role Colors",fields:["Role","Colors (HEX)","record_id"],view:"Grid view"};function v(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var b,h,y=[37.76496739271615,-122.39985495803376],w=window.innerHeight>=window.innerWidth;function N(e){b=function(e){for(var n={type:"FeatureCollection",features:[]},t=0;t<e.length;t++){var r=e[t];if(r[c]&&r[d]){r[c]=r[c].replace(",","."),r[d]=r[d].replace(",",".");var o=r[c],a=r[d];o.match(/[a-z]/i)&&a.match(/[a-z]/i)&&(r[c]=O(r[c]),r[d]=O(r[d]));try{if(0==isNaN(parseFloat(o))&&0==isNaN(parseFloat(a))){var i=L(r);n.features.push(i)}}catch(e){console.log("error parsing row",t,r,e)}}}return n}(e),console.log(e),console.log(b),console.log(e.length,"rows received"),console.log(b.features.length,"rows parsed"),function(e){h=l.map("map",{center:y,zoom:5,scrollWheelZoom:!1,zoomControl:!1}),l.control.zoom({position:"bottomleft"}).addTo(h),l.tileLayer("https://api.mapbox.com/styles/v1/bplmp/cklqt2e0v3ia517pfvnkqyt1z/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiYnBsbXAiLCJhIjoiY2tscXN6ZXJvMHlmZDJ2cHNuYXg4cm0zdSJ9.NJq68mVfGTdY3qFd1Huj5w",{maxZoom:18,attribution:'Map data &copy <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.light"}).addTo(h);var n=l.geoJSON(e,{pointToLayer:function(e,n){return l.circleMarker(n,{radius:5,fillColor:E(e.properties[p]),color:"#fff",weight:1.2,opacity:1,fillOpacity:.9})},onEachFeature:function(e,n){var t=e.properties,r=function(e){return e||""};n.bindPopup('\n      <div class="popup">\n        <h2>'+t["Entity Name"]+"</h2>\n        "+(t.Region?"<h4>"+t.Region+"</h4>":"")+'\n        <hr/>\n        <table class="popup-table">\n          <tbody>\n            <tr><td><strong>Role(s)</strong></td><td>'+r(t[u])+"</td></tr>\n            <tr><td><strong>Address</strong></td><td>"+r(t["Full Address"])+"</td></tr>\n            <tr><td><strong>Contact</strong></td><td>"+r(t["Contact Name"])+'</td></tr>\n            <tr><td><strong>Email</strong></td><td><a href="mailto:'+r(t.Email)+'">'+r(t.Email)+'</a></td></tr>\n            <tr><td><strong>Phone</strong></td><td><a href="tel:'+r(t["Phone Number"])+'">'+r(t["Phone Number"])+'</a></td></tr>\n            <tr><td><strong>Website</strong></td><td><a href="'+r(t.Website)+'" target="_blank">'+r(t.Website)+'</a></td></tr>\n          </tbody>\n        </table>\n        <p class="popup-p"><strong>Collaboration Opportunities: </strong>'+r(t["Collaboration Opportunities"])+"</p>\n      </div>\n      ",{maxWidth:w?.75*window.innerWidth:450}),n.bindTooltip('\n      <div class="tooltip">\n        <strong style="font-size: 1.25em;">'+t["Entity Name"]+"</strong>\n        "+(t.Region?"<br /><span>"+t.Region+"</span>":"")+"\n      </div>\n      ",{maxWidth:w?.75*window.innerWidth:250})}}).addTo(h);h.fitBounds(n.getBounds())}(b),setTimeout((function(){document.getElementById("spinner").style.display="none"}),350)}function E(e){return e.length?e[0]:"#333"}function L(e){var n={type:"Feature",properties:e,geometry:{type:"Point",coordinates:[]}};return n.geometry.coordinates.push(parseFloat(e[c])),n.geometry.coordinates.push(parseFloat(e[d])),n}function O(e){var n=e.split(/[^\d\w\.]+/);return function(e,n,t,r){var o=parseInt(e)+parseInt(n)/60+parseInt(t)/3600;"S"!=r&&"W"!=r||(o*=-1);return o}(n[0],n[1],n[2],n[3])}function R(e){for(var n,t=['\n    <div id="map-legend-show" class="map-legend-row map-legend-icon flex '+(w?"visible":"invisible")+'">\n      <span>See Legend</span>\n    </div>\n    <div id="map-legend-hide" class="map-legend-row map-legend-icon flex '+(w?"invisible":"visible")+'">\n      <span>Hide Legend</span>\n    </div>\n  '],r=v(e);!(n=r()).done;){var o=n.value;t.push('\n      <div class="map-legend-row map-legend-content flex '+(w?"invisible":"visible")+'">\n        <div class="map-legend-color" style="background: '+o[1]+'"></div>\n        <span>'+o[0]+"</span>\n      </div>\n    ")}return'<div class="map-legend flex flex-column">'+t.join("\n")+"</div>"}var S=t(0);t(32),t(108);function x(e,n){S.fn.dataTable.ext.errMode="none";var t=S(n).DataTable({data:e,responsive:!0,paging:!0,lengthChange:!1,order:[[0,"asc"]],columns:[{data:"Entity Name",title:"ENTITY:",className:"details-col",render:function(e,n,t,r){return'<span class="details-link">'+e+"</span>"}},{data:u,title:"PRIMARY ROLE:"},{data:"Secondary Role (if applicable)",title:"SECONDARY ROLE:"},{data:"Region",name:"REGION",title:"REGION:"},{data:"Full Address",title:"ADDRESS:",className:"none"},{data:"Contact Name",title:"CONTACT:",className:"none"},{data:"Email",title:"EMAIL:",className:"none",render:function(e,n,t,r){return'<a href="mailto:'+e+'">'+e+"</a>"}},{data:"Phone Number",title:"PHONE:",className:"none",render:function(e,n,t,r){return'<a href="tel:'+e+'">'+e+"</a>"}},{data:"Website",title:"WEBSITE:",className:"none",render:function(e,n,t,r){return'<a href="'+e+'" target="_blank">'+e+"</a>"}},{data:"Collaboration Opportunities",title:"COLLABORATION OPPORTUNITIES:",className:"none"}]}),r=e.map((function(e){return e.REGION})).filter((function(e,n,t){return t.indexOf(e)===n}));if(r.length>1){r.unshift("All"),S("<span><strong>Zoom to a region: </strong>&nbsp;</span>").appendTo("#regionSelectDiv");var o=S('<select id="regionSelect">').appendTo("#regionSelectDiv");S(r).each((function(){o.append(S("<option>").attr("value",this).text(this))})),o.on("change",(function(){var e=this.value,n="All"===e?"":e;t.column("REGION:name").search(n).draw(),"all"!==e.toLowerCase()||h.fitBounds(l.geoJSON(b).getBounds())}))}}var C=new s.a({apiKey:"keyXTEWIgSJI4MeGu"}).base("app2Ufltjsi6qQF2b"),I=function(){var e=Object(a.a)(o.a.mark((function e(n){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name,r=n.fields,a=n.view,e.abrupt("return",new Promise((function(e,n){var o=[];C(t).select({maxRecords:500,view:a,fields:r}).eachPage((function(e,n){o=[].concat(o,e.map((function(e){return e.fields}))),n()}),(function(t){t&&n(t),e(o)}))})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=Object(a.a)(o.a.mark((function e(){var n,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(m);case 2:return n=e.sent,e.next=5,I(f);case 5:return t=e.sent,n=n.map((function(e){var n=Object.assign({},e);return n[u]=n[u].map((function(e){var n;return null===(n=t.find((function(n){return(null==n?void 0:n.record_id)===e})))||void 0===n?void 0:n.Role})),n["Secondary Role (if applicable)"]=n[u].map((function(e){var n;return null===(n=t.find((function(n){return(null==n?void 0:n.record_id)===e})))||void 0===n?void 0:n.Role})),n})),t=t.map((function(e){return[e.Role,e["Colors (HEX)"]]})),e.abrupt("return",[n,t]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t(109);var A=document.querySelector("#app"),k=window.location!=window.parent.location?document.referrer:document.location.href,P=k.indexOf("table=hide")>0;A.innerHTML='\n<div id="spinner">\n  <div class="spinner-grow text-secondary" role="status">\n    <span class="sr-only">Loading...</span>\n  </div>\n</div>\n<div id="map"></div>\n<a href="https://www.buildingproductecosystems.org/" target="_blank">\n  <img src="images/bpe-logo.png" alt="Building Product Ecosystems" id="mapLogo"></img>\n</a>\n<div id="mapLegend"></div>\n<div id="regionSelectDiv"></div>\n\n<div class="credits" style="display: '+(P?"none":"block")+'">\n  '+(k.indexOf("buildingproductecosystems.org")>0?"":'<p>Resources compiled by <a href="https://www.buildingproductecosystems.org/">Building Product Ecosystems</a> | Please submit <a href="https://www.buildingproductecosystems.org/regional-reuse-resources#suggestions">suggestions, additions, or corrections</a> here.</p>')+'\n</div>\n\n<div class="table-wrapper" style="display: '+(P?"none":"block")+'">\n  <table id="table" class="stripe display responsive" width="100%"></table>\n</div>\n';var W=function(){var e=Object(a.a)(o.a.mark((function e(){var n,t,r,a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:n=e.sent,t=n[0],r=n[1],console.log(t,r),N(t),x(t,"#table"),document.querySelector("#mapLegend").innerHTML=R(r),a=document.querySelector("#map-legend-show"),i=document.querySelector("#map-legend-hide"),s=document.querySelectorAll(".map-legend-content"),a.onclick=function(){a.classList.add("invisible"),a.classList.remove("visible"),i.classList.add("visible"),i.classList.remove("invisible"),s.forEach((function(e){e.classList.add("visible"),e.classList.remove("invisible")}))},i.onclick=function(){a.classList.remove("invisible"),a.classList.add("visible"),i.classList.remove("visible"),i.classList.add("invisible"),s.forEach((function(e){e.classList.remove("visible"),e.classList.add("invisible")}))};case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.addEventListener("DOMContentLoaded",W)},35:function(e,n,t){e.exports=t(110)},94:function(e,n){},95:function(e,n){}},[[35,1,2]]]);
//# sourceMappingURL=app.c02cb18c.js.map